



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for the AeroGameFramework">
      
      
        <link rel="canonical" href="https://sleitnick.github.io/AeroGameFramework/services/">
      
      
        <meta name="author" content="Stephen Leitnick">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/logo_32.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Services - AeroGameFramework</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#services" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://sleitnick.github.io/AeroGameFramework/" title="AeroGameFramework" aria-label="AeroGameFramework" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../img/logo_64.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              AeroGameFramework
            </span>
            <span class="md-header-nav__topic">
              
                Services
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://sleitnick.github.io/AeroGameFramework/" title="AeroGameFramework" class="md-nav__button md-logo">
      
        <img alt="logo" src="../img/logo_64.png" width="48" height="48">
      
    </a>
    AeroGameFramework
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../install/" title="Install & Setup" class="md-nav__link">
      Install & Setup
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Services
      </label>
    
    <a href="./" title="Services" class="md-nav__link md-nav__link--active">
      Services
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    API
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#injected-properties" class="md-nav__link">
    Injected Properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#injected-methods" class="md-nav__link">
    Injected Methods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serviceinit" class="md-nav__link">
    service:Init()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#servicestart" class="md-nav__link">
    service:Start()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-methods" class="md-nav__link">
    Custom Methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-events" class="md-nav__link">
    Server Events
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapmodule" class="md-nav__link">
    WrapModule
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-table" class="md-nav__link">
    Client Table
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client-methods" class="md-nav__link">
    Client Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-events" class="md-nav__link">
    Client Events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference-server-table" class="md-nav__link">
    Reference Server Table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caching-results" class="md-nav__link">
    Caching Results
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forcing-init-order" class="md-nav__link">
    Forcing Init Order
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-examples" class="md-nav__link">
    Other Examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#invoking-another-service" class="md-nav__link">
    Invoking another service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-module" class="md-nav__link">
    Using a Module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-shared-module" class="md-nav__link">
    Using a Shared module
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../controllers/" title="Controllers" class="md-nav__link">
      Controllers
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../modules/" title="Modules" class="md-nav__link">
      Modules
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../execution_model/" title="Execution Model" class="md-nav__link">
      Execution Model
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Module Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Module Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      Server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        Server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1-1" type="checkbox" id="nav-7-1-1">
    
    <label class="md-nav__link" for="nav-7-1-1">
      Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-1-1">
        Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/server_services/store_service/" title="StoreService" class="md-nav__link">
      StoreService
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1-2" type="checkbox" id="nav-7-1-2">
    
    <label class="md-nav__link" for="nav-7-1-2">
      Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-1-2">
        Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/server_modules/data/" title="Data" class="md-nav__link">
      Data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Client
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Client
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2-1" type="checkbox" id="nav-7-2-1">
    
    <label class="md-nav__link" for="nav-7-2-1">
      Controllers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-2-1">
        Controllers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/client_controllers/user_input/" title="UserInput" class="md-nav__link">
      UserInput
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2-1-2" type="checkbox" id="nav-7-2-1-2">
    
    <label class="md-nav__link" for="nav-7-2-1-2">
      UserInput (modules)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-2-1-2">
        UserInput (modules)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/client_controllers/user_inputs/mouse/" title="Mouse" class="md-nav__link">
      Mouse
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/client_controllers/user_inputs/keyboard/" title="Keyboard" class="md-nav__link">
      Keyboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/client_controllers/user_inputs/gamepad/" title="Gamepad" class="md-nav__link">
      Gamepad
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/client_controllers/user_inputs/mobile/" title="Mobile" class="md-nav__link">
      Mobile
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/client_controllers/fade/" title="Fade" class="md-nav__link">
      Fade
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/client_controllers/task_scheduler/" title="TaskScheduler" class="md-nav__link">
      TaskScheduler
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2-2" type="checkbox" id="nav-7-2-2">
    
    <label class="md-nav__link" for="nav-7-2-2">
      Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-2-2">
        Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/client_modules/camera_shaker/" title="CameraShaker" class="md-nav__link">
      CameraShaker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/client_modules/smooth/" title="Smooth" class="md-nav__link">
      Smooth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/client_modules/tween/" title="Tween" class="md-nav__link">
      Tween
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/client_modules/pid/" title="PID" class="md-nav__link">
      PID
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3" type="checkbox" id="nav-7-3">
    
    <label class="md-nav__link" for="nav-7-3">
      Shared Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-3">
        Shared Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/shared/base64/" title="Base64" class="md-nav__link">
      Base64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/shared/date/" title="Date" class="md-nav__link">
      Date
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/shared/event/" title="Event" class="md-nav__link">
      Event
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/shared/listener_list/" title="ListenerList" class="md-nav__link">
      ListenerList
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/shared/maid/" title="Maid" class="md-nav__link">
      Maid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/shared/number_util/" title="NumberUtil" class="md-nav__link">
      NumberUtil
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/shared/promise/" title="Promise" class="md-nav__link">
      Promise
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/shared/string_util/" title="StringUtil" class="md-nav__link">
      StringUtil
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/shared/table_util/" title="TableUtil" class="md-nav__link">
      TableUtil
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/shared/thread/" title="Thread" class="md-nav__link">
      Thread
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module_docs/shared/vector_util/" title="VectorUtil" class="md-nav__link">
      VectorUtil
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    API
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#injected-properties" class="md-nav__link">
    Injected Properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#injected-methods" class="md-nav__link">
    Injected Methods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serviceinit" class="md-nav__link">
    service:Init()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#servicestart" class="md-nav__link">
    service:Start()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-methods" class="md-nav__link">
    Custom Methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-events" class="md-nav__link">
    Server Events
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapmodule" class="md-nav__link">
    WrapModule
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-table" class="md-nav__link">
    Client Table
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client-methods" class="md-nav__link">
    Client Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-events" class="md-nav__link">
    Client Events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference-server-table" class="md-nav__link">
    Reference Server Table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caching-results" class="md-nav__link">
    Caching Results
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forcing-init-order" class="md-nav__link">
    Forcing Init Order
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-examples" class="md-nav__link">
    Other Examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#invoking-another-service" class="md-nav__link">
    Invoking another service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-module" class="md-nav__link">
    Using a Module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-shared-module" class="md-nav__link">
    Using a Shared module
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="services">Services<a class="headerlink" href="#services" title="Permanent link">&para;</a></h1>
<p>A service is a singleton initiated at runtime on the server. Services should serve specific purposes. For instance, the provided DataService allows simplified data management. You might also create a WeaponService, which might be used for holding and figuring out weapon information for the players.</p>
<hr />
<h2 id="api">API<a class="headerlink" href="#api" title="Permanent link">&para;</a></h2>
<p>A service in its simplest form looks like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="n">MyService</span> <span class="o">=</span> <span class="p">{</span><span class="n">Client</span> <span class="o">=</span> <span class="p">{}}</span>

<span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Start</span><span class="p">()</span>
    <span class="c1">-- Called after all services have been initialized</span>
    <span class="c1">-- Called asynchronously from other services</span>
    <span class="c1">-- Safe to call any other framework modules</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Init</span><span class="p">()</span>
    <span class="c1">-- Called after all modules have been &quot;required&quot; but before &#39;Start()&#39; has been called on any of them</span>
    <span class="c1">-- Safe to reference &#39;self.Services/Modules/Shared&#39;</span>
    <span class="c1">-- NOT safe to USE/CALL other services yet (use them in/after Start method)</span>
    <span class="c1">-- Register all events here (but only connect to events in Start)</span>
<span class="kr">end</span>

<span class="kr">return</span> <span class="n">MyService</span>
</code></pre></div>
</td></tr></table>

<h3 id="injected-properties">Injected Properties<a class="headerlink" href="#injected-properties" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>service.Services</code></td>
<td>Table of all other services, referenced by the name of the ModuleScript</td>
</tr>
<tr>
<td><code>service.Modules</code></td>
<td>Table of all modules, referenced by the name of the ModuleScript</td>
</tr>
<tr>
<td><code>service.Shared</code></td>
<td>Table of all shared modules, referenced by the name of the ModuleScript</td>
</tr>
<tr>
<td><code>service.Client.Server</code></td>
<td>Reference back to the service, so client-facing methods can invoke server-facing methods</td>
</tr>
</tbody>
</table>
<h3 id="injected-methods">Injected Methods<a class="headerlink" href="#injected-methods" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Method</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>void</code></td>
<td><code>service:WrapModule(Table tbl)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>service:RegisterEvent(String eventName)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>service:RegisterClientEvent(String clientEventName)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>service:FireEvent(String eventName, ...)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>service:FireClientEvent(String clientEventName, Player player, ...)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>service:FireAllClientsEvent(String clientEventName, ...)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>service:FireOtherClients(String clientEventName, Player player, ...)</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>service:FireAllClientsEventExcept(String clientEventName, Player player, ...)</code> [Deprecated in favor of FireOtherClients]</td>
</tr>
<tr>
<td><code>Connection</code></td>
<td><code>service:ConnectEvent(String eventName, Function handler)</code></td>
</tr>
<tr>
<td><code>Connection</code></td>
<td><code>service:ConnectClientEvent(String clientEventName, Function handler)</code></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="serviceinit"><code>service:Init()</code><a class="headerlink" href="#serviceinit" title="Permanent link">&para;</a></h2>
<p>The <code>Init</code> method is called on each service in the framework in a synchronous and linear progression. In other words, each service's <code>Init</code> method is invoked one after the other. Each <code>Init</code> method must fully execute before moving onto the next. This is essentially the constructor for the service singleton.</p>
<p>The method should be used to set up your service. For instance, you might want to create events or reference other services.</p>
<p>Use the <code>Init</code> method to register events and initialize any necessary components before the <code>Start</code> method is invoked.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code>Init</code> method should <em>not</em> invoke any methods from other services yet, because it is not guaranteed that those services have had their <code>Init</code> methods invoked yet. It is safe to <em>reference</em> other services, but not to invoke their methods.</p>
</div>
<hr />
<h2 id="servicestart"><code>service:Start()</code><a class="headerlink" href="#servicestart" title="Permanent link">&para;</a></h2>
<p>The <code>Start</code> method is called after all services have been initialized (i.e. their <code>Init</code> methods have been fully executed). Each <code>Start</code> method is executed on a <em>separate</em> thread (asynchronously). From here, it is safe to reference and invoke other services in the framework.</p>
<hr />
<h2 id="custom-methods">Custom Methods<a class="headerlink" href="#custom-methods" title="Permanent link">&para;</a></h2>
<p>Adding your own methods to a service is very easy. Simply attach a function to the service table:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1">-- Custom method:</span>
<span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">PrintSomething</span><span class="p">(...)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MyService:&quot;</span><span class="p">,</span> <span class="p">...)</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Start</span><span class="p">()</span>
    <span class="c1">-- Invoke the custom method:</span>
    <span class="n">self</span><span class="p">:</span><span class="n">PrintSomething</span><span class="p">(</span><span class="s2">&quot;Hi&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="s2">&quot;ABC&quot;</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>

<p>Other services can also invoke your custom method:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">function</span> <span class="nc">AnotherService</span><span class="p">:</span><span class="nf">Start</span><span class="p">()</span>
    <span class="n">self</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">MyService</span><span class="p">:</span><span class="n">PrintSomething</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">64</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>

<hr />
<h2 id="server-events">Server Events<a class="headerlink" href="#server-events" title="Permanent link">&para;</a></h2>
<p>You can create and listen to events using the <code>RegisterEvent</code>, <code>ConnectEvent</code>, and <code>FireEvent</code> methods. All events should always be registered within the <code>Init</code> method. The <code>ConnectEvent</code> and <code>FireEvent</code> methods should never be used within an <code>Init</code> method.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Start</span><span class="p">()</span>
    <span class="c1">-- Connect to &#39;Hello&#39; event:</span>
    <span class="n">self</span><span class="p">:</span><span class="n">ConnectEvent</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="kr">function</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="kr">end</span><span class="p">)</span>
    <span class="c1">-- Fire &#39;Hello&#39; event:</span>
    <span class="n">self</span><span class="p">:</span><span class="n">FireEvent</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello world!&quot;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Init</span><span class="p">()</span>
    <span class="c1">-- Register &#39;Hello&#39; event:</span>
    <span class="n">self</span><span class="p">:</span><span class="n">RegisterEvent</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>

<hr />
<h2 id="wrapmodule">WrapModule<a class="headerlink" href="#wrapmodule" title="Permanent link">&para;</a></h2>
<p>The <code>WrapModule</code> method can be used to transform a table into a framework-like module. In other words, it sets the table's metatable to the same metatable used by other framework modules, thus exposing the framework to the given table.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Start</span><span class="p">()</span>

    <span class="kd">local</span> <span class="n">thisThing</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="kr">function</span> <span class="nc">thisThing</span><span class="p">:</span><span class="nf">Start</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;thisThing started&quot;</span><span class="p">)</span>
    <span class="kr">end</span>

    <span class="kr">function</span> <span class="nc">thisThing</span><span class="p">:</span><span class="nf">Init</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;thisThing initialized&quot;</span><span class="p">)</span>
    <span class="kr">end</span>

    <span class="c1">-- Transform &#39;thisThing&#39; into a framework object:</span>
    <span class="n">self</span><span class="p">:</span><span class="n">WrapModule</span><span class="p">(</span><span class="n">thisThing</span><span class="p">)</span>

<span class="kr">end</span>
</code></pre></div>
</td></tr></table>

<p>This can be useful if you are requiring other non-framework modules in which you want to expose the framework.</p>
<hr />
<h2 id="client-table">Client Table<a class="headerlink" href="#client-table" title="Permanent link">&para;</a></h2>
<p>The <code>Client</code> table is used to expose methods and events to the client.</p>
<h3 id="client-methods">Client Methods<a class="headerlink" href="#client-methods" title="Permanent link">&para;</a></h3>
<p>To expose a method to the client, write a function attached to the client table:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">function</span> <span class="nc">MyService</span><span class="p">.</span><span class="nc">Client</span><span class="p">:</span><span class="nf">Echo</span><span class="p">(</span><span class="n">player</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">message</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>

<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The <code>player</code> argument must <em>always</em> be the first argument for client methods. Any other arguments reflect what the client has sent.</p>
</div>
<h3 id="client-events">Client Events<a class="headerlink" href="#client-events" title="Permanent link">&para;</a></h3>
<p>To expose an event to the client, use the <code>RegisterClientEvent</code> method in the <code>Init</code> method. Use <code>FireClientEvent</code> and <code>FireAllClientsEvent</code> to fire the event:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Start</span><span class="p">()</span>
    <span class="c1">-- Fire client event for a specific player:</span>
    <span class="n">self</span><span class="p">:</span><span class="n">FireClientEvent</span><span class="p">(</span><span class="s2">&quot;MyClientEvent&quot;</span><span class="p">,</span> <span class="n">somePlayer</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">)</span>

    <span class="c1">-- Fire client event for all players:</span>
    <span class="n">self</span><span class="p">:</span><span class="n">FireAllClientsEvent</span><span class="p">(</span><span class="s2">&quot;MyClientEvent&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Init</span><span class="p">()</span>
    <span class="c1">-- Register client event:</span>
    <span class="n">self</span><span class="p">:</span><span class="n">RegisterClientEvent</span><span class="p">(</span><span class="s2">&quot;MyClientMethod&quot;</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>

<h3 id="reference-server-table">Reference Server Table<a class="headerlink" href="#reference-server-table" title="Permanent link">&para;</a></h3>
<p>When executing code with a client-exposed method, it is useful to be able to reference back to the main service table. Therefore, the <code>Server</code> property has been injected into the <code>Client</code> table:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1">-- Client-exposed &#39;Echo&#39; method invoking &#39;Print&#39; method:</span>
<span class="kr">function</span> <span class="nc">MyService</span><span class="p">.</span><span class="nc">Client</span><span class="p">:</span><span class="nf">Echo</span><span class="p">(</span><span class="n">player</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">Server</span><span class="p">:</span><span class="n">Print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="c1">-- Note the reference to &#39;self.Server&#39;</span>
    <span class="kr">return</span> <span class="n">message</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">msg</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>

<h3 id="caching-results">Caching Results<a class="headerlink" href="#caching-results" title="Permanent link">&para;</a></h3>
<p>In some cases, it is nice for the client to cache the results returned from the server to reduce the server load. This is especially true in cases where the returned values do not change. To enable caching, the <code>CacheClientMethod</code> method must be invoked for each client method.</p>
<p>When enabling caching, the TTL (time to live) period can be set. For instance, if TTL is set to <code>10</code>, then the client will only invoke the server if the current value returned is older than 10 seconds. If the TTL argument left blank, the first value cached will always be used and will never invoke the server again.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">function</span> <span class="nc">MyService</span><span class="p">.</span><span class="nc">Client</span><span class="p">:</span><span class="nf">Hello</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>
    <span class="kr">return</span> <span class="s2">&quot;Hello! &quot;</span> <span class="o">..</span> <span class="nb">math.random</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">MyService</span><span class="p">.</span><span class="nc">Client</span><span class="p">:</span><span class="nf">Bye</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>
    <span class="kr">return</span> <span class="s2">&quot;Bye! &quot;</span> <span class="o">..</span> <span class="nb">math.random</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Init</span><span class="p">()</span>

    <span class="c1">-- The client will cache the result of &#39;Hello&#39; forever:</span>
    <span class="n">self</span><span class="p">:</span><span class="n">CacheClientMethod</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>

    <span class="c1">-- The client will cache the result of &#39;Bye&#39; for 60 seconds:</span>
    <span class="n">self</span><span class="p">:</span><span class="n">CacheClientMethod</span><span class="p">(</span><span class="s2">&quot;Bye&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>

<span class="kr">end</span>
</code></pre></div>
</td></tr></table>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>No changes need to be done on the client. The client will automatically pick up on the caching rules defined in the service.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code>CacheClientMethod</code> should only be invoked within the <code>Init</code> method of a service.</p>
</div>
<hr />
<h2 id="forcing-init-order">Forcing <code>Init</code> Order<a class="headerlink" href="#forcing-init-order" title="Permanent link">&para;</a></h2>
<p>By setting the <code>__aeroOrder</code> field, the <code>Init</code> execution order can be defined. By default, the order of execution is unknown.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kd">local</span> <span class="n">MyService</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">MyService</span><span class="p">.</span><span class="n">__aeroOrder</span> <span class="o">=</span> <span class="mi">1</span>

<span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Init</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MyService will be initialized before AnotherService&quot;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="p">...</span>

<span class="kd">local</span> <span class="n">AnotherService</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">AnotherService</span><span class="p">.</span><span class="n">__aeroOrder</span> <span class="o">=</span> <span class="mi">2</span>

<span class="kr">function</span> <span class="nc">AnotherService</span><span class="p">:</span><span class="nf">Init</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;AnotherService will be initialized after MyService&quot;</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>

<p>By practice, it is discouraged to utilize another service before entering into the <code>Start</code> phase of the service (i.e. after all services have been initialized). However, using <code>__aeroOrder</code> can be used to guarantee initialization order. In the above example, <code>AnotherService</code> would be able to safely utilize <code>MyService</code>, knowing that <code>MyService</code> is guaranteed to have been initialized due to the execution order.</p>
<hr />
<h2 id="other-examples">Other Examples<a class="headerlink" href="#other-examples" title="Permanent link">&para;</a></h2>
<h3 id="invoking-another-service">Invoking another service<a class="headerlink" href="#invoking-another-service" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Start</span><span class="p">()</span>
    <span class="c1">-- Get some global data from the DataService:</span>
    <span class="kd">local</span> <span class="n">dataService</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">DataService</span>
    <span class="kd">local</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dataService</span><span class="p">:</span><span class="n">GetGlobal</span><span class="p">(</span><span class="s2">&quot;Test&quot;</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>

<h3 id="using-a-module">Using a Module<a class="headerlink" href="#using-a-module" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Start</span><span class="p">()</span>
    <span class="kd">local</span> <span class="n">someModule</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">Modules</span><span class="p">.</span><span class="n">SomeModule</span>
    <span class="n">someModule</span><span class="p">:</span><span class="n">DoSomething</span><span class="p">()</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>

<h3 id="using-a-shared-module">Using a Shared module<a class="headerlink" href="#using-a-shared-module" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">function</span> <span class="nc">MyService</span><span class="p">:</span><span class="nf">Start</span><span class="p">()</span>
    <span class="c1">-- Print the current date:</span>
    <span class="kd">local</span> <span class="n">Date</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">Shared</span><span class="p">.</span><span class="n">Date</span>
    <span class="kd">local</span> <span class="n">now</span> <span class="o">=</span> <span class="n">Date</span><span class="p">.</span><span class="n">new</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Now&quot;</span><span class="p">,</span> <span class="n">now</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
</td></tr></table>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../install/" title="Install & Setup" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Install & Setup
              </span>
            </div>
          </a>
        
        
          <a href="../controllers/" title="Controllers" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Controllers
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/Sleitnick/AeroGameFramework" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
    
  </body>
</html>